{"version":3,"file":"static/js/index.js","sources":["/home/runner/work/rsbuild-plugin-glsl/rsbuild-plugin-glsl/node_modules/.pnpm/@rspack+core@1.0.0-beta.1_@swc+helpers@0.5.11/node_modules/@rspack/core/dist/builtin-plugin/css-extract/hmr/hotModuleReplacement.js","/home/runner/work/rsbuild-plugin-glsl/rsbuild-plugin-glsl/node_modules/.pnpm/@rspack+core@1.0.0-beta.1_@swc+helpers@0.5.11/node_modules/@rspack/core/dist/builtin-plugin/css-extract/hmr/normalizeUrl.js","/home/runner/work/rsbuild-plugin-glsl/rsbuild-plugin-glsl/playground/src/styles/index.less","/home/runner/work/rsbuild-plugin-glsl/rsbuild-plugin-glsl/playground/src/App.tsx","/home/runner/work/rsbuild-plugin-glsl/rsbuild-plugin-glsl/playground/src/index.tsx","/home/runner/work/rsbuild-plugin-glsl/rsbuild-plugin-glsl/playground/src/layouts/Layout.tsx","/home/runner/work/rsbuild-plugin-glsl/rsbuild-plugin-glsl/playground/src/routes/index.tsx"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cssReload = void 0;\nconst normalizeUrl_1 = require(\"./normalizeUrl\");\nconst srcByModuleId = Object.create(null);\nconst noDocument = typeof document === \"undefined\";\nconst { forEach } = Array.prototype;\nfunction debounce(fn, time) {\n    let timeout = 0;\n    return function () {\n        // @ts-ignore\n        const self = this;\n        const args = arguments;\n        const functionCall = function functionCall() {\n            return fn.apply(self, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(functionCall, time);\n    };\n}\nfunction noop() { }\nfunction getCurrentScriptUrl(moduleId) {\n    let src = srcByModuleId[moduleId];\n    if (!src) {\n        if (document.currentScript) {\n            ({ src } = document.currentScript);\n        }\n        else {\n            const scripts = document.getElementsByTagName(\"script\");\n            const lastScriptTag = scripts[scripts.length - 1];\n            if (lastScriptTag) {\n                ({ src } = lastScriptTag);\n            }\n        }\n        srcByModuleId[moduleId] = src;\n    }\n    return function (fileMap) {\n        if (!src) {\n            return null;\n        }\n        const splitResult = src.split(/([^\\\\/]+)\\.js$/);\n        const filename = splitResult && splitResult[1];\n        if (!filename) {\n            return [src.replace(\".js\", \".css\")];\n        }\n        if (!fileMap) {\n            return [src.replace(\".js\", \".css\")];\n        }\n        return fileMap.split(\",\").map(mapRule => {\n            const reg = new RegExp(`${filename}\\\\.js$`, \"g\");\n            return (0, normalizeUrl_1.normalizeUrl)(src.replace(reg, `${mapRule.replace(/{fileName}/g, filename)}.css`));\n        });\n    };\n}\nfunction updateCss(el, url) {\n    if (!url) {\n        if (!el.href) {\n            return;\n        }\n        url = el.href.split(\"?\")[0];\n    }\n    if (!isUrlRequest(url)) {\n        return;\n    }\n    if (el.isLoaded === false) {\n        // We seem to be about to replace a css link that hasn't loaded yet.\n        // We're probably changing the same file more than once.\n        return;\n    }\n    if (!url || !(url.indexOf(\".css\") > -1)) {\n        return;\n    }\n    el.visited = true;\n    const newEl = el.cloneNode();\n    newEl.isLoaded = false;\n    newEl.addEventListener(\"load\", () => {\n        if (newEl.isLoaded) {\n            return;\n        }\n        newEl.isLoaded = true;\n        el.parentNode?.removeChild(el);\n    });\n    newEl.addEventListener(\"error\", () => {\n        if (newEl.isLoaded) {\n            return;\n        }\n        newEl.isLoaded = true;\n        el.parentNode?.removeChild(el);\n    });\n    newEl.href = `${url}?${Date.now()}`;\n    if (el.nextSibling) {\n        el.parentNode?.insertBefore(newEl, el.nextSibling);\n    }\n    else {\n        el.parentNode?.appendChild(newEl);\n    }\n}\nfunction getReloadUrl(href, src) {\n    let ret = \"\";\n    href = (0, normalizeUrl_1.normalizeUrl)(href);\n    src.some(url => {\n        if (href.indexOf(src) > -1) {\n            ret = url;\n        }\n    });\n    return ret;\n}\nfunction reloadStyle(src) {\n    if (!src) {\n        return false;\n    }\n    const elements = document.querySelectorAll(\"link\");\n    let loaded = false;\n    forEach.call(elements, el => {\n        if (!el.href) {\n            return;\n        }\n        const url = getReloadUrl(el.href, src);\n        if (!isUrlRequest(url)) {\n            return;\n        }\n        if (el.visited === true) {\n            return;\n        }\n        if (url) {\n            updateCss(el, url);\n            loaded = true;\n        }\n    });\n    return loaded;\n}\nfunction reloadAll() {\n    const elements = document.querySelectorAll(\"link\");\n    forEach.call(elements, el => {\n        if (el.visited === true) {\n            return;\n        }\n        updateCss(el);\n    });\n}\nfunction isUrlRequest(url) {\n    // An URL is not an request if\n    // It is not http or https\n    if (!/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(url)) {\n        return false;\n    }\n    return true;\n}\nfunction cssReload(moduleId, options) {\n    if (noDocument) {\n        console.log(\"no window.document found, will not HMR CSS\");\n        return noop;\n    }\n    const getScriptSrc = getCurrentScriptUrl(moduleId);\n    function update() {\n        const src = getScriptSrc(options.filename);\n        const reloaded = reloadStyle(src);\n        if (options.locals) {\n            console.log(\"[HMR] Detected local css modules. Reload all css\");\n            reloadAll();\n            return;\n        }\n        if (reloaded) {\n            console.log(\"[HMR] css reload %s\", src?.join(\" \"));\n        }\n        else {\n            console.log(\"[HMR] Reload all css\");\n            reloadAll();\n        }\n    }\n    return debounce(update, 50);\n}\nexports.cssReload = cssReload;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.normalizeUrl = void 0;\nfunction normalizeUrl(urlString) {\n    urlString = urlString.trim();\n    if (/^data:/i.test(urlString)) {\n        return urlString;\n    }\n    var protocol = urlString.indexOf(\"//\") !== -1 ? urlString.split(\"//\")[0] + \"//\" : \"\";\n    var components = urlString.replace(new RegExp(protocol, \"i\"), \"\").split(\"/\");\n    var host = components[0].toLowerCase().replace(/\\.$/, \"\");\n    components[0] = \"\";\n    var path = components\n        .reduce(function (accumulator, item) {\n        switch (item) {\n            case \"..\":\n                accumulator.pop();\n                break;\n            case \".\":\n                break;\n            default:\n                accumulator.push(item);\n        }\n        return accumulator;\n    }, [])\n        .join(\"/\");\n    return protocol + host + path;\n}\nexports.normalizeUrl = normalizeUrl;\n","// extracted by css-extract-rspack-plugin\nexport {};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = undefined;\n        // 1722444689934\n        var cssReload = require(\"../../../node_modules/.pnpm/@rspack+core@1.0.0-beta.1_@swc+helpers@0.5.11/node_modules/@rspack/core/dist/builtin-plugin/css-extract/hmr/hotModuleReplacement.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","import { HashRouter } from 'react-router-dom';\nimport { RouterList, routes } from './routes';\n\nconst App = () => (\n  <HashRouter>\n    <RouterList routes={routes}></RouterList>\n  </HashRouter>\n);\n\nexport default App;\n","import './styles/index.less';\nimport { createRoot } from 'react-dom/client';\n\nimport App from './App';\n\nconst root = createRoot(document.getElementById('root') as HTMLElement);\n\nconst render = () => {\n  root.render(<App></App>);\n};\n\nrender();\n","import { useEffect } from 'react';\nimport { useLocation, Outlet } from 'react-router-dom';\n\nconst Layout = () => {\n  const location = useLocation();\n\n  /** 页面切换的时候触发 */\n  useEffect(() => {\n    console.log('切换页面', location.pathname, location.pathname?.search);\n  }, [location.pathname, location.pathname?.search]);\n\n  return <Outlet></Outlet>;\n};\n\nexport default Layout;\n","import { lazy } from 'react';\nimport { useRoutes, Navigate } from 'react-router-dom';\nimport Layout from '../layouts/Layout';\n\nconst Index = lazy(() => import('../pages/Index/index'));\n\nconst asyncRoutes = [\n  {\n    path: '/',\n    element: <Navigate to=\"/index\" />,\n  },\n  {\n    path: '/',\n    element: <Layout />,\n    children: [\n      {\n        path: '/index',\n        index: true,\n        // lazy: async () => ({\n        //   Component: (await import('@/views/Home')).default,\n        // }),\n        element: <Index />,\n      },\n      {\n        path: '*',\n        element: <Navigate to=\"/index\" />,\n      },\n    ],\n  },\n];\n\nconst errorRoutes = [\n  {\n    path: '*',\n    element: <Navigate to=\"/index\" />,\n  },\n];\n\nconst routes = [...asyncRoutes, ...errorRoutes];\n\n// eslint-disable-next-line @typescript-eslint/no-shadow\nconst RouterList = ({ routes }) => useRoutes(routes);\n\nexport { routes, RouterList };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvBA;AACA;AAEA;AAEA;AAAA;;;;;;;;;;;AAFA;AAMA;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AACA;AAEA;AAEA;AAEA;AACA;;;;;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;ACXA;AACA;AAEA;;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;;;;;AACA;AATA;;AACA;;;AADA;AAWA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AAAA;;;;;;AACA;AACA;AACA;AACA;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AACA;AACA;AACA;AAAA;;;;;;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;;;;;;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;;AAAA;AAAA;AAAA;;AAAA;;;AAAA;AAEA"}